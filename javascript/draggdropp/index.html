<!DOCTYPE HTML>
<html>
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>JQuery Drog n Drop</title>
        <script type="text/javascript" src="jquery/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="jquery/jquery-ui-1.8.16.custom.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('.droppable').droppable();
		
                $('.droppable').bind("drop",function(event,ui){
			
                    if(event.target.tagName != 'P'){
                        $(event.srcElement).remove();
                        $(this).append('<p>'+event.target.innerHTML+'</p>');
                    }
                    else {
                        var ID = $(this).attr('id');
                        var parentID = event.srcElement.parentNode.id;
                        switch(ID){
                            case 'dropareaB' : {
                                    if(parentID == 'dropareaA'){
                                        $(event.srcElement).remove();
                                        $(this).append('<p>'+event.target.innerHTML+'</p>');
                                    }
                                }break;
					
                            case 'dropareaC' : {
                                    if(parentID == 'dropareaA' || parentID == 'dropareaB'){
                                        $(event.srcElement).remove();
                                        $(this).append('<p>'+event.target.innerHTML+'</p>');
                                    }
                                }break;
                        }
                    }
                });
		
                $('.droppable').bind("dropover",function(event,ui){
                    var src = event.srcElement.parentNode.id;
                    var dst = $(this).attr('id');	
			
                    switch(dst) {
                        case 'dropareaA' : {
                                if(src != 'dropareaA'){
                                    $(this).addClass('error');
                                }
                                else {
                                    $(this).addClass('valid');	
                                }
                            }break;
                        case 'dropareaB' : {
                                if(src == 'dropareaC'){
                                    $(this).addClass('error');
                                }
                                else {
                                    $(this).addClass('valid');	
                                }
                            }break;
                        case 'dropareaC' : {
                                $(this).addClass('valid');
                            }break;
                    }
                });
		
                $('.droppable').bind("dropout",function(event,ui) {
                    $(this).removeClass('error');
                    $(this).removeClass('valid');
                });
				
                $('.droppable').bind("drop",function(event,ui) {
                    $('.droppable').removeClass('error');
                    $('.droppable').removeClass('valid');
                });
		
                $('.droppable').sortable();
		
                $('.draggable').draggable({ revert:"invalid" });
		
            });
        </script>
        <style type="text/css">
.draggable, .droppable > p {
	padding:10px;
	border:1px solid #999;
	color:#333;
 background::#AAD5FF;
	cursor:move;
	width:300px;
}
.droppable > p {
	width:auto;
}
.droppable {
	background:#FFC;
	border:1px solid #FC9;
	padding:10px;
	display:block;
	width:300px;
	height:300px;
	float:left;
	display:inline-block;
	margin:10px;
}
.valid {
	background:#0C9;
}
.error {
	background:#F00;
}
</style>
        </head>

        <body>
<div class="draggable"> This is first draggable module1. </div>
<div class="draggable"> This is first draggable module2. </div>
<div class="draggable"> This is first draggable module3. </div>
<div class="droppable" id="dropareaA"></div>
<div class="droppable" id="dropareaB"></div>
<div class="droppable" id="dropareaC"></div>
</body>
</html>
